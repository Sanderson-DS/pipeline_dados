Em algumas situações, precisamos buscar dados que não sabemos exatamente como são, mas temos uma ideia do formato. Nesse caso, podemos utilizar expressões regulares, ou Regex, que são uma sequência de caracteres que definem um padrão de busca.

No nosso caso, utilizamos um comando para buscar todos os produtos cuja data de compra ocorreu a partir de 2021. O código foi o seguinte:

query = {"Data da Compra": {"$regex": "/202[1-9]"}}

lista_produtos = []
for doc in collection.find(query):
    lista_produtos.append(doc)
Copiar código
A expressão "/202[1-9]" é uma regex que define o padrão de busca. Vamos entender melhor:

/202: corresponde exatamente aos caracteres "/202". Ou seja, estamos buscando strings que possuam em sua composição o padrão /202.
[1-9]: corresponde a qualquer caractere único entre 1 e 9. Como estamos buscando por anos a partir de 2021, queremos que o quarto dígito seja pelo menos 1.
Assim, o comando busca por todas as datas de compra que tenham os caracteres "/202" seguidos de qualquer dígito de 1 a 9, o que inclui todos os anos de 2021 a 2029.

As expressões regulares são ferramentas poderosas e podem ser bastante complexas, permitindo definir padrões de busca muito específicos. Se quiser aprender mais sobre elas, recomendo o Alura+: Manipulação de strings com Pandas.

